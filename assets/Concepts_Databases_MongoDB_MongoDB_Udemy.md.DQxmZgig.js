import{f as e,h as t,j as n,t as r}from"./chunks/plugin-vue_export-helper.Dz-VHcSB.js";const i=JSON.parse(`{"title":"MongoDB","description":"MongoDB is a cross-platform document-oriented database program. Classified as a NoSQL database program","frontmatter":{"title":"MongoDB","description":"MongoDB is a cross-platform document-oriented database program. Classified as a NoSQL database program"},"headers":[],"relativePath":"Concepts/Databases/MongoDB/MongoDB_Udemy.md","filePath":"Concepts/Databases/MongoDB/MongoDB_Udemy.md","lastUpdated":1767053997000}`);var a={name:`Concepts/Databases/MongoDB/MongoDB_Udemy.md`};function o(r,i,a,o,s,c){return n(),e(`div`,null,[...i[0]||=[t(`<h1 id="mongodb" tabindex="-1">MongoDB <a class="header-anchor" href="#mongodb" aria-label="Permalink to “MongoDB”">​</a></h1><p>MongoDB is a:</p><ul><li>Flexible</li><li>Scalable (scale-out)</li><li>General-purpose</li><li><strong>Document-Oriented</strong> database</li></ul><p>Features of MongoDB:</p><ul><li><p><strong>Indexing</strong>: MongoDB supports generic secondary indexes and provides unique, compound, geospatial, and full-text indexing capabilities as well. Secondary indexes on hierarchical structures such as nested documents and arrays are also supported and enable developers to take full advantage of the ability to model in ways that best suit their applications</p></li><li><p><strong>Aggregation</strong>: MongoDB provides an aggregation framework based on the concept of data processing pipelines. Aggregation pipelines allow you to build complex analytics engines by processing data through a series of relatively simple stages on the server side, taking full advantage of database optimizations</p></li><li><p><strong>Special collection and index types</strong>: MongoDB supports time-to-live (TTL) collections for data that should expire at a certain time, such as sessions and fixed-size (capped) collections, for holding recent data, such as logs. MongoDB also supports partial indexes limited to only those documents matching a criteria filter in order to increase efficiency and reduce the amount of storage space required</p></li><li><p><strong>File Storage</strong>: MongoDB supports an easy-to-use protocol for storing large files and file metadata</p></li></ul><p>Applications send query for data to MongoDB Server. MongoDB Server gets the data through a Storage Engine, which handles the actual reading and writing of the data to the database</p><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to “Setup”">​</a></h2><p>Installation steps for both (L)UNIX and Windows systems</p><h3 id="linux-setup" tabindex="-1">Linux Setup <a class="header-anchor" href="#linux-setup" aria-label="Permalink to “Linux Setup”">​</a></h3><ol><li><p>Install MongoDB using your favourite package manager for your distro or build one for your system</p></li><li><p>After installation, configure MongoDB. <code>mongod</code> (MongoDB Demon) will be used for configuration:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># create directory for database storage</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">sudo</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> mkdir</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> -p</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> /data/db</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">sudo</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> chown</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> -Rv</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> $(</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">whoami</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> /data/db</span></span></code></pre></div></li><li><p>Start the mongo server: <code>mongod</code></p></li><li><p>Open a new terminal and start working on MongoDB: <code>mongo</code></p></li><li><p>Every time we want to work on MongoDB. We need to start the <code>mongod</code> every time. So, we have to add MongoDB as a service, this will start the MongoDB service every time system boots up</p></li><li><p>Optionally provide database and log path:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">mongod</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> --dbpath</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> /data/db</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> --logpath</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> /data/logs/</span></span></code></pre></div><ul><li><code>.mongorc.js</code> Loads whenever the shell is started</li></ul></li></ol><h3 id="windows-setup" tabindex="-1">Windows Setup <a class="header-anchor" href="#windows-setup" aria-label="Permalink to “Windows Setup”">​</a></h3><ol><li><p>Download and install MongoDB from <a href="https://www.mongodb.com/" target="_blank" rel="noreferrer">MongoDB Site</a>, use the default settings (customize the paths is you need to)</p></li><li><p>Add the MongoDB installed path to your Environment variable Path (change the version number accordingly i.e. 4.2 to the installed version) <code>C:\\Program Files\\MongoDB\\Server\\4.2\\bin\\</code></p></li><li><p>Open <em>command prompt</em> and run <code>mongo</code> to start the MongoDB shell to interact with the DB</p></li></ol><p>Other applications required are:</p><ul><li>Install <strong>Robo 3T</strong> (Robomongo), a GUI to interact with the MongoDB database. It&#39;s an alternative to MongoDB Compass</li></ul><h2 id="databases-collections-and-documents" tabindex="-1">Databases, Collections, And Documents <a class="header-anchor" href="#databases-collections-and-documents" aria-label="Permalink to “Databases, Collections, And Documents”">​</a></h2><ul><li><p>A <strong>document</strong> is the basic unit of data for MongoDB and is roughly equivalent to a row in a relational database management system (but much more expressive)</p></li><li><p>A <strong>collection</strong> can be thought of as a table with a dynamic schema that contains documents</p></li><li><p>A single instance of MongoDB can host multiple independent <strong>databases</strong>, each of which contains its own <em>collections</em></p></li><li><p>Databases and Collections are created &quot;lazily&quot; or implicitly (when a Document is inserted)</p></li></ul><h3 id="documents" tabindex="-1">Documents <a class="header-anchor" href="#documents" aria-label="Permalink to “Documents”">​</a></h3><ul><li><p>Document is an ordered set of keys with associated values</p></li><li><p>A value can be one of several different <a href="#data-types">Data Types</a> supported by MongoDB</p></li><li><p>Every document has a special key, <strong><code>_id</code></strong>, that is unique within a collection. By default a unique <code>_id</code> is generated if explicitly not provided</p></li><li><p>Documents can have embedded documents and array fields</p></li><li><p>MongoDB is <em>type-sensitive</em> and <em>case-sensitive</em></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// THE BELOW DOCUMENTS ARE DIFFERENT FROM EACH OTHER</span></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// TYPE-SENSITIVITY OF VALUE, NUMBER VS STRING</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">count</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> : </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">count</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> : </span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">5</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// CASE-SENSITIVITY OF KEY</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">count</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> : </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Count</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> : </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">}</span></span></code></pre></div></li></ul><h4 id="keys" tabindex="-1">Keys <a class="header-anchor" href="#keys" aria-label="Permalink to “Keys”">​</a></h4><p>Keys can be any UTF-8 character, with some exceptions:</p><ul><li>Keys must not contain the character <strong>\\0</strong> (the <code>null</code> character). This character is used to signify the end of a key</li><li>The <code>.</code> and <code>$</code> characters are reserved characters</li><li>All the keys inside a document <strong>must be unique</strong> to that document</li></ul><p><em>Embedded Documents</em>:</p><ul><li>Up to <strong>100 Levels of Nesting</strong></li><li>Maximum size of each documents is <strong>16 MB</strong>.</li></ul><h3 id="collections" tabindex="-1">Collections <a class="header-anchor" href="#collections" aria-label="Permalink to “Collections”">​</a></h3><p>A <em>collection</em> is a group of documents</p><p>Collection names can be any UTF-8 string, with few restrictions:</p><ol><li><p>The <strong>empty string</strong> (&quot;&quot;) is not valid</p></li><li><p>Collection names may not contain the character <strong>\\0</strong> (the <code>null</code> character), because this delineates the end of a collection name</p></li><li><p><strong>system</strong> should not be used as it is a <strong>reserved for internal collections</strong></p></li><li><p>Also <code>$</code> and <code>.</code> is a reserved word and should not be used in the collection names</p></li><li><p>Collections can be organized using <strong>namespace sub-collections</strong> separated by the <code>.</code> character</p></li></ol><p>Commands:</p><ul><li><p><code>show collections</code>: List of collections</p></li><li><p><code>db.collectionName.insertOne({.})</code>: Creates a collection if not present and inserts one document</p></li><li><p><code>db.&lt;collectionName&gt;.find().pretty()</code>: List of all documents present in the collection</p></li><li><p><code>db.&lt;collectionName&gt;.drop()</code></p></li></ul><h3 id="databases" tabindex="-1">Databases <a class="header-anchor" href="#databases" aria-label="Permalink to “Databases”">​</a></h3><p>MongoDB groups collections into <em>databases</em></p><ul><li>Database names: <ul><li><p>The <strong>empty string</strong> (&quot;&quot;) is not valid</p></li><li><p>Special characters such as <code>/</code>, <code>*</code>, <code>.</code>, <code>&quot;*</code>, <code>**</code>, <code>&lt;</code>, <code>&gt;</code>, <code>:</code>, <code>|</code>, <code>?</code>, <code>$</code>, (a single space), or <code>\\0</code> (the <code>null</code> character) should not be used in database names</p></li><li><p>Database names are <strong>case-insensitive</strong></p></li><li><p>Database names are limited to a <strong>maximum of 64 bytes</strong></p></li></ul></li></ul><p>Commands:</p><ul><li><code>show dbs</code>: List of databases</li><li><code>use newDBName</code>: Creates a new database</li><li><code>db</code>: To check which database is in use</li><li><code>db.createUser({ ... })</code>: Create user for the database</li></ul><p>Some reserved database names:</p><ul><li><p><code>admin</code>: The <em>admin</em> database plays a role in authentication and authorization</p></li><li><p><code>local</code>: This database stores data specific to a single server. In replica sets, <em>local</em> stores data used in the replication process. The <em>local</em> database itself is never replicated</p></li><li><p><code>config</code>: Sharded MongoDB clusters use the config database to store information about each shard</p></li></ul><h2 id="data-types" tabindex="-1">Data Types <a class="header-anchor" href="#data-types" aria-label="Permalink to “Data Types”">​</a></h2><ol><li><p><strong>String</strong>: Any strings of UTF-8 and must be enclosed in double or single quotes</p></li><li><p><strong>Boolean</strong>: <code>true</code> and <code>false</code>.</p></li><li><p><strong>Number</strong>: By default all numeric values are stored as (in mongo shell) <em>64-bit floating-point numbers</em>, which have much less precision than decimal numbers</p><ul><li><strong>Integer</strong> (int32): <code>55</code> written using <code>NumberInt(55)</code>.</li><li><strong>NumberLong</strong> (int64): <code>10000000000</code></li><li><strong>NumberDecimal</strong> Doubles (64bit): <code>12.99</code></li><li><strong>High Precision Doubles</strong> (128bit):</li></ul></li><li><p><strong>ObjectID</strong>: Unique 12-byte IDs (temporal component) - <code>ObjectID(&quot;UUID&quot;)</code>.</p></li><li><p><strong>Date</strong>: Stores dates in ISO format - <code>ISODate(&quot;2018-09-09&quot;)</code> and <code>{&quot;today&quot; : new Date()}</code>.</p><ul><li><strong>Timestamp</strong>: It is a special type for internal MongoDB use and not directly associated with the regular Date type</li></ul></li><li><p><strong>Embedded Documents</strong>: Documents can contain entire documents embedded as values in a parent document:</p></li><li><p><strong>Array</strong>: A collection of items</p></li><li><p><strong>Null</strong>: A key with value as <code>null</code> or a non-existent value</p></li><li><p><strong>Regular Expression</strong>: Values can be JavaScript&#39;s regular expression syntax - <code>{&quot;regex&quot; : /foobar/i}</code>.</p></li><li><p><strong>Binary Data</strong>: Binary data is a string of arbitrary bytes. It cannot be manipulated from the shell. Binary data is the only way to save non-UTF-8 strings to the database</p></li><li><p><strong>Code</strong>: MongoDB also makes it possible to store arbitrary JavaScript in queries and documents - <code>{&quot;x&quot; : function() { /* ... */ }}</code>.</p></li></ol><h2 id="operations" tabindex="-1">Operations <a class="header-anchor" href="#operations" aria-label="Permalink to “Operations”">​</a></h2><h3 id="crud-operations" tabindex="-1">CRUD Operations <a class="header-anchor" href="#crud-operations" aria-label="Permalink to “CRUD Operations”">​</a></h3><ul><li><code>find()</code> <strong>returns a cursor</strong>, not a list of documents</li><li>Filters and operators (<code>$gt</code>...) can be used to retrieve specify particular documents and also limit the number of documents</li></ul><h4 id="create-documents" tabindex="-1">CREATE Documents <a class="header-anchor" href="#create-documents" aria-label="Permalink to “CREATE Documents”">​</a></h4><ul><li><p><code>insertOne()</code>: Insert one document at a time with or without user defined <code>_id</code>.</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// UNIQUE ID GIVEN BY MongoDB</span></span>
<span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">collectionName</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">insertOne</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">({</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">key</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">value</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// UNIQUE ID GIVEN BY THE USER</span></span>
<span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">collectionName</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">insertOne</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">({</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">_id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">4984</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;"> key</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">: </span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">value</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">})</span></span></code></pre></div></li><li><p><code>insertMany()</code>: Insert multiple documents by passing an array of documents</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">collectionName</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">insertMany</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">([{</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> key</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">value</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> key</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">value</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }]);</span></span></code></pre></div><blockquote><p>MongoDB dose not accept message longer than 48MB and will split into batches of 48MB if message is large</p></blockquote></li><li><p><code>insert()</code>: Insert one or more documents at a time. It is not recommended to use. Also, this command dose not return the <em>ID</em> of the inserted document</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">collectionName</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">insert</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">();</span></span></code></pre></div></li><li><p><code>mongoimport</code>: Import documents from an external file</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">mongoimport</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> -d</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> cars</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> -c</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> carsList</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> --drop</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> --jsonArray</span></span></code></pre></div></li></ul><p>Insert Options:</p><ol><li><p><strong>Ordered Insert</strong>: MongoDB by default inserts documents in a Ordered Insert method i.e. While inserting multiple documents, each document is processed and inserted separately. If one of the document insertion fails, MongoDB stops insertion of rest of the documents. All the documents before the error were inserted</p><ul><li><p><strong>MongoDB will not rollback</strong> documents inserted before the error</p></li><li><p>Ordered insert can be disabled, so that the documents after the error are also inserted</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">collectionName</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">insertMany</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">(</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  [</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">    {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> _id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">yoga</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Yoga</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">    {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> _id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">yoga</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Yoga</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">    {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> _id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Cooking</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Cooking</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  ],</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> ordered</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;"> false</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// IN THIS EXAMPLE DOCUMENT WITH _id: &quot;Cooking&quot; WILL BE INSERTED EVEN THOUGH THERE WAS AN ERROR IN THE PREVIOUS DOCUMENT</span></span></code></pre></div></li></ul></li><li><p><strong>Write Concern</strong>: Write concern describes the level of acknowledgment requested from MongoDB for write operations</p><ul><li><p>Here, <strong><code>w: 1</code></strong> is acknowledgment is requested on a write operation and it is <strong><code>w: 0</code></strong> if no acknowledgment is needed. If <code>w</code> is <strong>greater than 1</strong> then it requires acknowledgment from the primary and as many data-bearing secondaries as needed to meet the specified write concern. Specifying <code>w: 2</code> would require acknowledgment from the primary and one of the secondaries. Specifying <code>w: 3</code> would require acknowledgment from the primary and both secondaries</p></li><li><p>The <code>j</code> option requests acknowledgment from MongoDB that the write operation has been written to the <a href="https://docs.mongodb.com/manual/core/journaling/" target="_blank" rel="noreferrer">on-disk journal</a>.</p></li><li><p>This option specifies a time limit, in milliseconds, for the write concern. <code>wtimeout</code> is only applicable for <code>w</code> values greater than <code>1</code>. <code>wtimeout</code> causes write operations to return with an error after the specified limit, even if the required write concern will eventually succeed. When these write operations return, MongoDB <strong>does not</strong> undo successful data modifications performed before the write concern exceeded the <code>wtimeout</code> time limit. If you do not specify the <code>wtimeout</code> option and the level of write concern is unachievable, the write operation will block indefinitely. Specifying a <code>wtimeout</code> value of <code>0</code> is equivalent to a write concern without the <code>wtimeout</code> option</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">collectionName</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">insertOne</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">({</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">_id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">yoga</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Yoga</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">},</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> w</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> &lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#22863A;">value</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">, j: </span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#22863A;">boolean</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">, wtimeout: </span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#22863A;">number</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> });</span></span></code></pre></div></li></ul></li></ol><p><strong>Atomicity</strong>: If an operation fails on a document, then the operation will be rolled back for only that document. The document is either saved or not saved</p><h5 id="import-documents-from-json-file" tabindex="-1">Import Documents from JSON File <a class="header-anchor" href="#import-documents-from-json-file" aria-label="Permalink to “Import Documents from JSON File”">​</a></h5><p><code>mongoimport JSONFileName.json -d dataBaseName -c collectionName --jsonArray --drop</code></p><h4 id="read-documents" tabindex="-1">READ Documents <a class="header-anchor" href="#read-documents" aria-label="Permalink to “READ Documents”">​</a></h4><h5 id="operators" tabindex="-1">Operators <a class="header-anchor" href="#operators" aria-label="Permalink to “Operators”">​</a></h5><ol><li>Query Operator: Used to locate the data. Example - <code>$eq</code>.</li><li>Projection Operator: Used to modify the data presentation. Example - <code>$</code>.</li><li>Update operator: Used to modify/add additional data. Example - <code>$inc</code>.</li></ol><h4 id="delete-documents" tabindex="-1">DELETE Documents <a class="header-anchor" href="#delete-documents" aria-label="Permalink to “DELETE Documents”">​</a></h4><ul><li><code>deleteOne()</code>: Deletes the first document that matches the filter. It takes a filter document as first parameter. This filter specifies a set of criteria to match against a document that needs to be removed</li><li><code>deleteMany()</code>: Similar to <code>deleteOne()</code>, this deletes many documents at a time</li><li><code>deleteMany({})</code> will remove all the documents in a collection</li></ul><blockquote><p><code>remove</code> is still supported but should not be used</p></blockquote><h4 id="drop" tabindex="-1">DROP <a class="header-anchor" href="#drop" aria-label="Permalink to “DROP”">​</a></h4><ul><li>Select the database: <code>use databaseName</code>.</li><li>Drop the database: <code>db.dropDatabase()</code>.</li><li>Similarly, to drop a collection use: <code>db.collectionName.drop()</code>.</li></ul><h4 id="update-documents" tabindex="-1">UPDATE Documents <a class="header-anchor" href="#update-documents" aria-label="Permalink to “UPDATE Documents”">​</a></h4><ul><li><code>updateOne()</code>: Updates one document. Takes a filter document as the first parameter and a modifier document, which describes changes to make, as the second parameter</li><li><code>updateMany()</code>: Updates many documents. Parameters are same as in <code>updateOne()</code>.</li><li>Updating a document is <strong>atomic</strong>: if two updates happen at the same time, whichever one reaches the server first will be applied, and then the next one will be applied</li></ul><blockquote><p>Expect value of <code>_id</code> every other value can be modified</p></blockquote><p>Update Operators:</p><ul><li><code>$set</code>: Sets the value of a field. If the field dose not yet exist, it will be created</li><li><code>$unset</code>: Removes the required field</li><li><code>$inc</code>: Increments the value of type integer, long, decimal, or decimal. It will create the field if not already present. It is used as the second parameter to update operations. <code>db.movies.updateOne({&#39;title&#39;: &#39;Matrix&#39;}, {&#39;$inc&#39;: {&#39;rating&#39;: 1}})</code></li><li><code>$rename</code>: Rename a field. <code>db.collection.updateMany({}, {$rename: {oldFieldName: &quot;newFieldName&quot;}})</code>.</li></ul><h5 id="array-operations" tabindex="-1">Array Operations <a class="header-anchor" href="#array-operations" aria-label="Permalink to “Array Operations”">​</a></h5><ul><li><p><code>$push</code>: Adds elements to the end of an array if the array exists and creates a new array if it does not</p><ul><li><p>If you want to add or append an array, use <code>$each</code>. <code>db.movies.updateOne({&quot;genre&quot; : &quot;horror&quot;}, {&quot;$push&quot; : {&quot;hourly&quot; : {&quot;$each&quot; : [562.776, 562.790, 559.123]}}})</code></p></li><li><p>If you want to limit the size of an array, use <code>$slice</code>. It will replace old values to fit the new ones. <code>db.movies.updateOne({&quot;genre&quot; : &quot;horror&quot;}, {&quot;$push&quot; : {&quot;top10&quot; : {&quot;$each&quot; : [&quot;Nightmare on Elm Street&quot;, &quot;Saw&quot;], &quot;$slice&quot; : -10}}})</code>.</p></li><li><p>If you want to sort the values inside an array before slicing them, use <code>$sort</code>.</p></li><li><p>To prevent insertion of duplicate values we can use <code>$ne</code> (not-equal-to) operator. <code>db.movies.updateOne({&quot;titles&quot; : {&quot;$ne&quot;: &quot;Jaws&quot;}, {$push: {&quot;titles&quot;: &quot;Jaws&quot;}}},</code></p></li><li><p>To prevent duplicates and treat an array as a set, use <code>$addToSet</code>. The <code>$each</code> operator can be used along with this operator, not with <code>$ne</code> operator</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">movies</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">updateOne</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">({</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;"> 1</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> $addToSet</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> genre</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Comedy</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// ALONG WITH &quot;$each&quot;</span></span>
<span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">movies</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">updateOne</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">(</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;"> 1</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> $addToSet</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> genre</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> $each</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Comedy</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Drama</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Horror</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">]</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">);</span></span></code></pre></div></li></ul></li><li><p><code>$pop</code>: Remove elements from an array,</p><ul><li><code>{&quot;$pop&quot;: {&quot;key&quot;: 1}}</code>: Removes an element from the end of an array</li><li><code>{&quot;$pop&quot;: {&quot;key&quot;: -1}}</code>: Removes an element from the beginning</li></ul></li><li><p>Updates on an array element can be done through:</p><ul><li><p>The index value of the element. MongoDB uses 0-based indexing. We can directly reference the required element in an array. <code>db.tv.findOne({&quot;genres.2&quot;: &quot;Family&quot;})</code>.</p></li><li><p>If the index of an element is unknown, then the position operator <code>$</code> can be used. <code>db.tv.findOne({&quot;reviews.$.author&quot;: &quot;Jim&quot;})</code>.</p></li><li><p>To update all the elements in an arrary, use <code>$[]</code></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">blog</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">updateOne</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">(</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">   {</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">post</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> :</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;"> post_id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">   {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> $set</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">comments.$[].hidden</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> :</span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;"> true</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">   }</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">)</span></span></code></pre></div></li></ul></li><li><p>Array filtering using <code>arrayFilters</code>:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">blog</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">updateOne</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">(</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> post</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;"> post_id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> $set</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">comments.$[elem].hidden</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;"> true</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">    arrayFilters</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> [{</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">elem.votes</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;"> $lte</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> -</span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">5</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> }],</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  }</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">);</span></span></code></pre></div><p>This command defines <code>elem</code> as the identifier for each matching element in the <code>&quot;comments&quot;</code> array. If the <code>votes</code> value for the comment identified by <code>elem</code> is less than or equal to <code>-5</code>, we will add a field called <code>&quot;hidden&quot;</code> to the <code>&quot;comments&quot;</code> document and set its value to <code>true</code>.</p></li></ul><blockquote><p><code>$each</code> needs to used before using any of the array operators</p></blockquote><h4 id="document-replacement" tabindex="-1">Document Replacement <a class="header-anchor" href="#document-replacement" aria-label="Permalink to “Document Replacement”">​</a></h4><ul><li><code>replaceOne()</code>: Replace a document fully with a new one. Takes a filter as the first parameter, but as the second parameter it expects a document with which it will replace the document matching the filter</li></ul><h3 id="joining-documents" tabindex="-1">Joining Documents <a class="header-anchor" href="#joining-documents" aria-label="Permalink to “Joining Documents”">​</a></h3><p><code>$lookup</code> is used to join two documents</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// CUSTOMERS DOCUMENT</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">    uerName</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">ABD</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">    favBooks</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">id1</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">id2</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">]</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">}</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">// BOOKS</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">    _id</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">id1</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">    name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">Lord of the Rings</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">}</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">customers</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">aggregate</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">([</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">    $lookup</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      from</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">books</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      localField</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">favBooks</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      foreignField</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">_id</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      as</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">favBookData</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">    },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">]);</span></span></code></pre></div><h2 id="schema" tabindex="-1">Schema <a class="header-anchor" href="#schema" aria-label="Permalink to “Schema”">​</a></h2><p>MongoDB supports <strong>dynamic schemas</strong> (dose not enforces any schema), i.e. documents don&#39;t have to use the same schema inside of one collection</p><h3 id="schema-validation" tabindex="-1">Schema Validation <a class="header-anchor" href="#schema-validation" aria-label="Permalink to “Schema Validation”">​</a></h3><ol><li>Validation Level: <ul><li>Which documents get validated?</li><li><strong>strict</strong>: All inserts and updates are validated</li><li><strong>moderate</strong>: All inserts and updates to correct documents are validated</li></ul></li><li>Validation Action: <ul><li>What happens if validation fails?</li><li><strong>error</strong>: Throw error and don&#39;t insert or update the document</li><li><strong>warn</strong>: Log warning but proceed with the operation</li></ul></li></ol><p><strong>Adding Validation</strong>:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">createCollection</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">posts</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">  validator</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">    $jsonSchema</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">object</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      required</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">title</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">text</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">creator</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">comments</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">],</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      properties</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        title</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">string</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be a string and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        text</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">string</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be a string and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        creator</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">objectId</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be an objectid and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        comments</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">array</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be an array and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          items</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">            bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">object</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">            required</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">text</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">author</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">],</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">            properties</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">              text</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">string</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be a string and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">              },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">              author</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">objectId</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be an objectid and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">              },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">            },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">          },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">      },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">    },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">});</span></span></code></pre></div><p><strong>Modify Validation Settings</strong>:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">db</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">runCommand</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">({</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">  collMod</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">posts</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">  validator</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">    $jsonSchema</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">object</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      required</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">title</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">text</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">creator</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">comments</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">],</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">      properties</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        title</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">string</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be a string and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        text</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">string</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be a string and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        creator</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">objectId</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be an objectid and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">        comments</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">array</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be an array and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">          items</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">            bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">object</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">            required</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">text</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">author</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">],</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">            properties</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">              text</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">string</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be a string and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">              },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">              author</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                bsonType</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">objectId</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">                description</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">must be an objectid and is required</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">              },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">            },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">          },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">        },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">      },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">    },</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">  },</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#24292E;">  validationAction</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">warn</span><span style="--shiki-dark:#C98A7D77;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#666666;--shiki-light:#24292E;">});</span></span></code></pre></div><h2 id="indexes" tabindex="-1">Indexes <a class="header-anchor" href="#indexes" aria-label="Permalink to “Indexes”">​</a></h2><p><code>db.collectionName.createIndex({&quot;dob.age&quot;: 1})</code></p><h2 id="geo-spatial-data" tabindex="-1">Geo-spatial Data <a class="header-anchor" href="#geo-spatial-data" aria-label="Permalink to “Geo-spatial Data”">​</a></h2><p>GeoJSON</p><h2 id="aggregation-framework" tabindex="-1">Aggregation Framework <a class="header-anchor" href="#aggregation-framework" aria-label="Permalink to “Aggregation Framework”">​</a></h2><h2 id="mongoose" tabindex="-1">Mongoose <a class="header-anchor" href="#mongoose" aria-label="Permalink to “Mongoose”">​</a></h2><p>Mongoose is an <em>Object Data Modelling</em> (ODM) library for MongoDB and Node.js. It manages relationships between data, provides schema validation, and is used to translate between objects in code and the representation of those objects in MongoDB</p><p><img src="/assets/mongoose-data-mapping.CBPuyq1a.jpg" alt="Mongoose Data Mapping"></p><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to “References”">​</a></h2><ul><li><a href="https://www.freecodecamp.org/news/introduction-to-mongoose-for-mongodb-d2a7aa593c57/" target="_blank" rel="noreferrer">freeCodeCamp - mongoose introduction</a></li></ul>`,89)]])}var s=r(a,[[`render`,o]]);export{i as __pageData,s as default};