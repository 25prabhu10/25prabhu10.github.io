import{f as e,h as t,j as n,t as r}from"./chunks/plugin-vue_export-helper.CMCX8Lry.js";const i=JSON.parse(`{"title":"Nginx","description":"Open source web and application server","frontmatter":{"title":"Nginx","description":"Open source web and application server"},"headers":[],"relativePath":"Languages/Nginx.md","filePath":"Languages/Nginx.md","lastUpdated":1767053997000}`);var a={name:`Languages/Nginx.md`};function o(r,i,a,o,s,c){return n(),e(`div`,null,[...i[0]||=[t(`<h1 id="nginx" tabindex="-1">Nginx <a class="header-anchor" href="#nginx" aria-label="Permalink to “Nginx”">​</a></h1><p><a href="https://www.nginx.com/" target="_blank" rel="noreferrer">nginx</a> (&quot;engine x&quot;) is a free, open-source HTTP web server that can also be used as:</p><ul><li>Reverse proxy</li><li>Content cache</li><li>Load balancer</li><li>TCP/UDP proxy server</li><li>Mail proxy</li></ul><p><a href="https://unit.nginx.org/" target="_blank" rel="noreferrer">Nginx Unit Docs</a></p><h2 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to “Architecture”">​</a></h2><p>nginx has one master process and several worker processes</p><ul><li><strong>Master process</strong>: Reads and evaluates <a href="#configuration">configuration</a>, maintains worker processes</li><li><strong>Worker processes</strong>: Do the actual processing of requests</li></ul><p>nginx uses an event-based model and OS-dependent mechanisms to efficiently distribute requests among worker processes</p><h2 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to “Setup”">​</a></h2><p>Start, stop, restart, reload, and check the status of the Nginx service:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">sudo</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> systemctl</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> start</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> nginx</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">sudo</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> systemctl</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> stop</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> nginx</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">sudo</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> systemctl</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> restart</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> nginx</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">sudo</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> systemctl</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> reload</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> nginx</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">sudo</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> systemctl</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> status</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> nginx</span></span></code></pre></div><p>Using command line arguments:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">nginx</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> -s</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> &lt;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">signa</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">l</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># signal can be:</span></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># stop: fast shutdown</span></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># quit: graceful shutdown</span></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># reopen: reloading the configuration file</span></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># reload: reopening the log files</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># Example:</span></span>
<span class="line"><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;">nginx</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> -s</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"># signal can also be sent using the kill command</span></span>
<span class="line"><span style="--shiki-dark:#B8A965;--shiki-light:#005CC5;">kill</span><span style="--shiki-dark:#C99076;--shiki-light:#005CC5;"> -s</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;"> QUIT</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> &lt;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">pi</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">d</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">&gt;</span></span></code></pre></div><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to “Configuration”">​</a></h2><p>The default configuration file is named <code>nginx.conf</code> and is located in the <code>/usr/local/nginx/conf</code>, <code>/etc/nginx</code>, or <code>/usr/local/etc/nginx</code> directory</p><p>nginx consists of modules that are controlled by directives specified in the configuration file</p><p>Directives are divided into simple directives and block directives</p><ul><li>A simple directive consists of the name and parameters separated by spaces and ends with a semicolon (<code>;</code>)</li><li>A block directive has the same structure as a simple directive, but instead of the semicolon, it ends with a set of additional directives enclosed in braces (<code>{}</code>)</li></ul><p>If a directive is placed outside of any block, it is considered a part of the <code>main</code> context</p><ul><li><code>#</code> (hash) is used for comments</li></ul><h3 id="serving-static-content" tabindex="-1">Serving Static Content <a class="header-anchor" href="#serving-static-content" aria-label="Permalink to “Serving Static Content”">​</a></h3><p>The <code>http</code> block is the main context and is used to configure how nginx handles HTTP requests</p><ul><li><p><code>server</code> block is used to define the settings for a virtual server (there can be multiple <code>server</code> blocks, distinguished by ports and server names)</p></li><li><p><code>location</code> block is used to define how nginx should handle requests for different URIs</p><ul><li><code>/</code> is used to match any request, <code>/path</code> is used to match requests for a specific path, and <code>~</code> is used for case-sensitive regular expression matching</li></ul></li><li><p><code>root</code> directive is used to define the root directory where nginx should look for files to serve</p><ul><li><code>/var/www/html</code> can be used as the root directory for serving static content or <code>/data/www</code> for a custom directory</li></ul></li></ul><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">http</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    server</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        listen </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">80</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;"> # listen on port 80</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">        location</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;"> / </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">            root </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/var/www/html</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">        location</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;"> /images/ </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">            root </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/data/www</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">        }</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">}</span></span></code></pre></div><h3 id="proxy-server" tabindex="-1">Proxy Server <a class="header-anchor" href="#proxy-server" aria-label="Permalink to “Proxy Server”">​</a></h3><p>The <code>proxy_pass</code> directive is used to define the URL of the proxied server</p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">http</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    server</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">        location</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;"> / </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">            proxy_pass </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">http://localhost:8080/</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">        location</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> ~</span><span style="--shiki-dark:#C4704F;--shiki-light:#032F62;"> \\.(gif|jpg|png)$ </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">            root </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/data/images</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">        }</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">}</span></span></code></pre></div><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">user </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">www-data</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">worker_processes </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">auto</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">pid </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/run/nginx.pid</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">events</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    worker_connections </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">768</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">http</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    include </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/etc/nginx/mime.types</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    default_type </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">application/octet-stream</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    sendfile </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">on</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    tcp_nopush </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">on</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    tcp_nodelay </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">on</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    keepalive_timeout </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">65</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    types_hash_max_size </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">2048</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    include </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/etc/nginx/conf.d/*.conf</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    include </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/etc/nginx/sites-enabled/*</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">}</span></span></code></pre></div><p>Logging and debugging:</p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">error_log </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">&lt;file&gt; &lt;loglevel&gt;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    error_log logs/error.log</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    error_log </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">logs/debug.log </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">debug</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    error_log </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">logs/error.log </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">notice</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span></code></pre></div><p>Basic listening ports:</p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">listen </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">&lt;port&gt; &lt;options&gt;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">        listen </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">80</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        listen </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">443</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> ssl http2</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        listen </span><span style="--shiki-dark:#4C9A91;--shiki-light:#005CC5;">443</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> http3 reuseport</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">this</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> is experimental!)</span></span></code></pre></div><p>Header modifications:</p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">add_header </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">&lt;header&gt; &lt;values&gt;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">        add_header Alt-svc </span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#666666;--shiki-light:#032F62;">$</span><span style="--shiki-dark:#C98A7D;--shiki-light:#24292E;">http3</span><span style="--shiki-dark:#C98A7D;--shiki-light:#032F62;">=&quot;:&lt;port&gt;&quot;; ma=&lt;value&gt;&#39;</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">this</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> is experimental!)</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">ssl_certificate </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/ ssl_certificate_key</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">        ssl_certificate cert.pem</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        ssl_certificate_key </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">cert.key</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">server_name </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">&lt;domains&gt;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    server_name domain1.com *.domain1.com</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">root &lt;folder&gt;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    root /var/www/html/domain1</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">index </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">&lt;file&gt;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    index index.php</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">location</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;"> &lt;url&gt; </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;"> / </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        root </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">index.html</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        index </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">index.html index.htm</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;"> / </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        try_files </span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">uri</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;"> $</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">uri</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">/ /index.php</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">is_args</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">args</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> ~</span><span style="--shiki-dark:#C4704F;--shiki-light:#032F62;"> \\\\.php$ </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        fastcgi_pass </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">127.0.0.1:9000</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        fastcgi_index </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">index.php</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        fastcgi_param </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> SCRIPT_FILENAME  /scripts</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">fastcgi_script_name</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        include </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">fastcgi_params</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> ~</span><span style="--shiki-dark:#C4704F;--shiki-light:#032F62;"> /\\\\.ht </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        deny </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">all</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#C4704F;--shiki-light:#032F62;"> /favicon.ico </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        log_not_found </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">off</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        access_log </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">off</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#C4704F;--shiki-light:#032F62;"> /robots.txt </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        log_not_found </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">off</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        access_log </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">off</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        allow </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">all</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;"> ~*</span><span style="--shiki-dark:#C4704F;--shiki-light:#032F62;"> .(css|gif|ico|jpeg|jpg|js|png)$ </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        expires </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">max</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        log_not_found </span><span style="--shiki-dark:#4D9375;--shiki-light:#005CC5;">off</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">}</span></span></code></pre></div><h2 id="reverse-proxy" tabindex="-1">Reverse Proxy <a class="header-anchor" href="#reverse-proxy" aria-label="Permalink to “Reverse Proxy”">​</a></h2><h3 id="show-client-s-real-ip" tabindex="-1">Show Client&#39;s real IP <a class="header-anchor" href="#show-client-s-real-ip" aria-label="Permalink to “Show Client&#39;s real IP”">​</a></h3><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes vitesse-dark github-light" style="--shiki-dark:#dbd7caee;--shiki-light:#24292e;--shiki-dark-bg:#121212;--shiki-light-bg:#fff;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">server</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">    server_name </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">example.com</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#CB7676;--shiki-light:#D73A49;">    location</span><span style="--shiki-dark:#80A665;--shiki-light:#6F42C1;"> / </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">{</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        proxy_pass </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">http://localhost:4000</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#758575DD;--shiki-light:#6A737D;">        # Show clients real IP behind a proxy</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        proxy_set_header </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">X-Real-IP </span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">remote_addr</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#4D9375;--shiki-light:#D73A49;">        proxy_set_header </span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">X-Forwarded-For </span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#BD976A;--shiki-light:#24292E;">proxy_add_x_forwarded_for</span><span style="--shiki-dark:#666666;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">    }</span></span>
<span class="line"><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#24292E;">}</span></span></code></pre></div>`,37)]])}var s=r(a,[[`render`,o]]);export{i as __pageData,s as default};